var myvne_plugins={API3_IS_READ:0,html_no_save:'<a href="javascript:void(0);" class="save"><svg class="ic ic-save-outline"><use xlink:href="#Save-1"></use></svg>L\u01b0u</a>',html_save:'<a href="javascript:void(0);" class="save active"><svg class="ic ic-save-outline"><use xlink:href="#Save"></use></svg>L\u01b0u</a>',html_no_save_social:'<a href="javascript:void(0);" class="social_save flexbox"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',html_save_social:'<a href="javascript:void(0);" class="social_save flexbox active"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',
html_no_save_social_v:'<a href="javascript:void(0);" class="circle_s flexbox luutin"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',html_save_social_v:'<a href="javascript:void(0);" class="circle_s flexbox luutin active"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',html_save_gocnhin:'<a title="\u0110\u00e3 l\u01b0u" href="javascript:;"><span class="icon_savebaiviet"></span><span><i class="ic ic-bookmark" style="display: none;"></i>\u0110\u00e3 l\u01b0u</span></a>',
html:{cooking:{saved:'<a href="javascript:void(0);" class="save"><svg class="icon-svg"><use xlink:href="#Save"></use></svg>\u0110\u00e3 l\u01b0u</a>',saved_notext:'<a href="javascript:void(0);" class="save"><svg class="icon-svg"><use xlink:href="#Save"></use></svg></a>',no_save:'<a href="javascript:void(0);" class="save"><svg class="icon-svg"><use xlink:href="#Save"></use></svg>L\u01b0u c\u00f4ng th\u1ee9c</a>',no_save_notext:'<a href="javascript:void(0);" class="save"><svg class="icon-svg"><use xlink:href="#Save"></use></svg></a>'}},
checking:0,checkingLimit:0,getCookie:function(a){a=this.prefix_cookie+a;a+="=";for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var c=b[d];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(a))return c.substring(a.length,c.length)}return null},initButton:function(){var a=this,b=a.getCookie("myvne_user_id");$("head").append("<style type='text/css'>.lds-hourglass:after{content:\" \";display:block;border-radius:50%;width:0;height:0;margin:3px;box-sizing:border-box;border:12px solid #757575;border-color:#757575 #fff #757575 #fff;animation:lds-hourglass 5s infinite}@keyframes lds-hourglass{0%{transform:rotate(0);animation-timing-function:cubic-bezier(.55,.055,.675,.19)}50%{transform:rotate(900deg);animation-timing-function:cubic-bezier(.215,.61,.355,1)}100%{transform:rotate(1800deg)}}</style>");
b&&!0!==isNaN(parseInt(b))||($(".social_pin .myvne_save_for_later:not([data-type])").addClass("border").html(a.html_no_save_social),$(".social-com .myvne_save_for_later:not([data-type]), .social .myvne_save_for_later:not([data-type])").addClass("border").html(a.html_no_save_social_v),$(".myvne_save_for_later[data-type]").each(function(){var d=$(this).data("type"),c=$(this).data("options")||"";$(this).html(c.includes("no-text")?a.html[d].no_save_notext:a.html[d].no_save)}));$(".footer-content .myvne_save_for_later:not([data-type])").html(a.html_no_save);
$(".meta .myvne_save_for_later:not([data-type])").html(a.html_save_gocnhin)},check:function(){var a=this;myvne_users.getProfileData(function(b){if("undefined"!=typeof b&&b.user_email&&0===a.checking){a.checkingLimit+=1;a.checking=1;var d=[];$(".myvne_save_for_later").each(function(c){c=$(this).attr("data-article-id").trim();0<parseInt(c)&&-1>=d.indexOf(c)&&d.push(c)});article_id=d.join(",");b.user_id&&article_id&&0==a.API3_IS_READ&&$.ajax({type:"GET",dataType:"json",data:{type:"check_user",app_id:"bd20c",
user_id:b.user_id,article_id:article_id,check:"article_save"},url:"//api3.vnexpress.net/api/article",success:function(c){$.each(d,function(l,e){var g=$('.social_pin .myvne_save_for_later[data-article-id="'+e+'"]:not([data-type])'),k=$('.social-com .myvne_save_for_later[data-article-id="'+e+'"]:not([data-type]), .social .myvne_save_for_later[data-article-id="'+e+'"]:not([data-type])'),f=$('.footer-content .myvne_save_for_later[data-article-id="'+e+'"]:not([data-type])'),h=$('.box-head-tablet .myvne_save_for_later[data-article-id="'+
e+'"]:not([data-type])'),m=$('.meta .myvne_save_for_later[data-article-id="'+e+'"]:not([data-type])'),p=$('.myvne_save_for_later[data-type][data-article-id="'+e+'"]');0==c.error&&1==c.data.article_save[e]?(g.html(a.html_save_social),k.html(a.html_save_social_v),f.html(a.html_save),h.html(a.html_save_social_v),m.addClass("active"),$('.myvne_save_for_later[data-article-id="'+e+'"]').addClass("saved"),$(p).each(function(){var n=$(this).data("type"),q=$(this).data("options")||"";$(this).addClass("saved").html(q.includes("no-text")?
a.html[n].saved_notext:a.html[n].saved)})):(g.html(a.html_no_save_social),k.html(a.html_no_save_social_v),f.html(a.html_no_save),h.html(a.html_no_save_social_v));g.addClass("border")});a.checking=1},error:function(c,l){a.checking=0}});setTimeout(function(){a.check()},6E4)}else 5>a.checkingLimit&&(a.checkingLimit+=1,setTimeout(function(){a.check()},3E3))})},saving:0,save:function(){var a=this;a.check();$(document).on("click",".myvne_save_for_later:not([running])",function(){if($(this).hasClass("running"))return!1;
$(this).attr("running",!0);setTimeout(function(){$(".myvne_save_for_later").removeAttr("running")},200);a.API3_IS_READ=1;var b=$(this).attr("data-article-id"),d=$(this).attr("data-token"),c=$(this).data("type")||null,l=$(this).data("options")||"",e=$(this);"object"==typeof myvne_users&&"function"==typeof myvne_users.authentication&&0===a.saving?(myvne_users.authentication(function(g){var k="vnexpress.net"===location.host?"vnexpress.net":location.host;if(g.user_email&&g.user_id)a.saving=1;else return myvne_users._html_popup_login(),
!1;var f={};f.user_id=g.user_id;f.article_id=b;f.token_key=d;f.user_session=g.user_session;e.hasClass("saved")||e.hasClass("active")?(f.saveaction="unsave",$.ajax({type:"GET",dataType:"jsonp",data:f,url:"//"+k+"/api/myvnesubmit",success:function(h){0==h.error?($('.social_pin .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type])').html(a.html_no_save_social),$('.social-com .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type]), .social .myvne_save_for_later[data-article-id="'+b+
'"]:not([data-type]), .box-head-tablet .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type])').html(a.html_no_save_social_v),$('.footer-content .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type])').html(a.html_no_save),$('.meta .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type])').removeClass("active").html(a.html_save_gocnhin),c&&$('.myvne_save_for_later[data-type="'+c+'"][data-article-id="'+b+'"]').html(l.includes("no-text")?a.html[c].no_save_notext:a.html[c].no_save),
$('.myvne_save_for_later[data-article-id="'+b+'"]').removeClass("saved")):myvne_users._html_popup_success("B\u1ecf l\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");a.saving=0},error:function(h,m){myvne_users._html_popup_success("B\u1ecf l\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");a.saving=0}})):$.ajax({type:"GET",dataType:"jsonp",data:f,url:"//"+k+"/api/myvnesubmit",success:function(h){0==h.error?($('.social_pin .myvne_save_for_later[data-article-id="'+
b+'"]:not([data-type])').html(a.html_save_social),$('.social-com .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type]), .social .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type]), .box-head-tablet .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type])').html(a.html_save_social_v),$('.footer-content .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type])').html(a.html_save),$('.meta .myvne_save_for_later[data-article-id="'+b+'"]:not([data-type])').addClass("active").html(a.html_save_gocnhin),
c&&$('.myvne_save_for_later[data-type="'+c+'"][data-article-id="'+b+'"]').html(l.includes("no-text")?a.html[c].saved_notext:a.html[c].saved),$('.myvne_save_for_later[data-article-id="'+b+'"]').addClass("saved"),dataLayer.push({event:"socialEvent",social_action:"save article"})):myvne_users._html_popup_success("L\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");a.saving=0},error:function(h,m){myvne_users._html_popup_success("L\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");
a.saving=0}})},"member"),setTimeout(function(){a.saving=0},1E4)):1===a.saving&&myvne_users._html_popup_success("Sau 10 gi\u00e2y b\u1ea1n m\u1edbi c\u00f3 th\u1ec3 th\u1ef1c hi\u1ec7n h\u00e0nh \u0111\u1ed9ng n\u00e0y.")})},run:function(){var a=this;a.initButton();var b=setInterval(function(){"undefined"!=typeof myvne_users&&(clearInterval(b),a.check(),a.save())},1E3);setTimeout(function(){"undefined"==typeof b&&null==b||clearInterval(b)},6E4)}};